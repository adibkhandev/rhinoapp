{"ast":null,"code":"var _jsxFileName = \"/home/adib/code/rhino_production/rhino/rhino-front/rhino/src/all-pages/GeoMap.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport ReactMapGL, { Marker, Popup } from \"react-map-gl\";\nimport axios from 'axios';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport Context from './Context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet GeoMap = () => {\n  _s();\n  let context = useContext(Context);\n  let id = context.userdata.id;\n  console.log(id);\n  let [search, setSearch] = useState('');\n  let [adress, setAdress] = useState(null);\n  const [viewport, setViewport] = useState({\n    latitude: 23.7531959,\n    longitude: 90.4374604\n  });\n  useEffect(() => {\n    console.log(viewport);\n  }, [viewport]);\n  useEffect(() => {\n    console.log(viewport);\n    if (\"geolocation\" in navigator) {\n      console.log('available');\n      navigator.geolocation.getCurrentPosition(position => {\n        console.log(position.coords.latitude, position.coords.longitude);\n        setViewport({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        });\n        console.log(viewport, 'vee');\n      });\n    } else {\n      console.log('bug');\n    }\n  }, []);\n  let onMarkerDragStart = event => {\n    const {\n      latitude,\n      longitude\n    } = event;\n  };\n  let onDragEnd = event => {\n    if (event.lngLat) {\n      let url = `https://api.geoapify.com/v1/geocode/reverse?lat=${event.lngLat.lat}&lon=${event.lngLat.lng}&apiKey=24d9c36345a346f1be7bc3c92cf1f26b`;\n      axios.get(url).then(response => {\n        console.log(response.data.features[0].properties.formatted);\n        setAdress(response.data.features[0].properties.formatted);\n        setViewport({\n          latitude: response.data.features[0].geometry.coordinates[1],\n          longitude: response.data.features[0].geometry.coordinates[0]\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n  let onMarkerDrag = event => {\n    const {\n      latitude,\n      longitude\n    } = event;\n  };\n  let geoCode = () => {\n    if (search) {\n      let url = `https://api.geoapify.com/v1/geocode/search?text=${search}&apiKey=24d9c36345a346f1be7bc3c92cf1f26b`;\n      axios.get(url).then(response => {\n        console.log(response.data.features[0].geometry.coordinates);\n        setViewport({\n          latitude: response.data.features[0].geometry.coordinates[1],\n          longitude: response.data.features[0].geometry.coordinates[0]\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n  let changeAdress = () => {\n    let url = 'http://127.0.0.1:8000/';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-cont\",\n    children: [viewport ? /*#__PURE__*/_jsxDEV(ReactMapGL, {\n      ...viewport,\n      latitude: viewport.latitude,\n      longitude: viewport.longitude,\n      width: \"100vw\",\n      height: \"1000vh\",\n      zoom: 15,\n      mapboxAccessToken: \"pk.eyJ1IjoiYWRpYmtoYW5kZXYiLCJhIjoiY2xnNWt4YW85MDRsaTNpcGQ5djFrdWhyYiJ9.T5M-84Av38RJSb1j1Bp6Iw\",\n      mapStyle: \"mapbox://styles/adibkhandev/clg6ih4pd009y01p0dup15qd7\",\n      onMove: evt => {\n        setViewport({\n          ...evt,\n          latitude: viewport.latitude,\n          longitude: viewport.longitude\n        });\n        console.log('hocche', evt);\n      },\n      children: /*#__PURE__*/_jsxDEV(Marker, {\n        draggable: true,\n        latitude: viewport.latitude || 23.7531959,\n        longitude: viewport.longitude || 90.4374604,\n        onDragStart: onMarkerDragStart,\n        onDragEnd: onDragEnd,\n        onDrag: onMarkerDrag\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this) : 'hi', /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"nav-cont\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nav\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: geoCode,\n          className: \"search-btn\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"images/search-ash.png\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: adress || search,\n          onChange: e => setSearch(e.target.value),\n          className: \"location-search\",\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"target\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"images/target.png\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s(GeoMap, \"iQSzIGNUUynimFjuoyJhYOkkyZk=\");\n_c = GeoMap;\nexport default GeoMap;\nvar _c;\n$RefreshReg$(_c, \"GeoMap\");","map":{"version":3,"names":["React","useState","useEffect","useContext","ReactMapGL","Marker","Popup","axios","Context","GeoMap","context","id","userdata","console","log","search","setSearch","adress","setAdress","viewport","setViewport","latitude","longitude","navigator","geolocation","getCurrentPosition","position","coords","onMarkerDragStart","event","onDragEnd","lngLat","url","lat","lng","get","then","response","data","features","properties","formatted","geometry","coordinates","catch","err","onMarkerDrag","geoCode","changeAdress","evt","e","target","value"],"sources":["/home/adib/code/rhino_production/rhino/rhino-front/rhino/src/all-pages/GeoMap.js"],"sourcesContent":["import React, { useState, useEffect,useContext} from \"react\";\nimport ReactMapGL, { Marker, Popup } from \"react-map-gl\";\nimport axios from 'axios'\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport Context from './Context'\n\nlet GeoMap = ()=> {\n  let context = useContext(Context)\n  let id = context.userdata.id\n  console.log(id)\n  let [search,setSearch]=useState('')\n  let [adress,setAdress] = useState(null)\n  const [viewport, setViewport] = useState({latitude: 23.7531959, longitude: 90.4374604});\n  useEffect(() => {\n    console.log(viewport)\n  }, [viewport])\n  useEffect(() => {\n    console.log(viewport)\n    if(\"geolocation\" in navigator){\n      console.log('available')\n      navigator.geolocation.getCurrentPosition((position)=>{\n        console.log(position.coords.latitude,position.coords.longitude)\n        setViewport({\n          latitude:position.coords.latitude,\n          longitude:position.coords.longitude,\n        })\n        console.log(viewport,'vee')\n      })\n    }\n    else{\n      console.log('bug')\n    }\n  },[])\n\n  let onMarkerDragStart = (event) => {\n    const {latitude, longitude} = event;\n   \n  }\n\n  let onDragEnd = (event) => {\n    \n    if(event.lngLat){\n      let url =`https://api.geoapify.com/v1/geocode/reverse?lat=${event.lngLat.lat}&lon=${event.lngLat.lng}&apiKey=24d9c36345a346f1be7bc3c92cf1f26b`\n      axios.get(url)\n       .then((response)=>{\n        console.log(response.data.features[0].properties.formatted)\n        setAdress(response.data.features[0].properties.formatted)\n        setViewport({\n          latitude:response.data.features[0].geometry.coordinates[1],\n          longitude:response.data.features[0].geometry.coordinates[0],\n        })\n       })\n       .catch((err)=>{\n        console.log(err)\n       })\n    }\n  }\n\n  let onMarkerDrag = (event) => {\n    const {latitude, longitude} = event;\n  \n  }\n\n\n  let geoCode = ()=>{\n    if(search){\n    let url = `https://api.geoapify.com/v1/geocode/search?text=${search}&apiKey=24d9c36345a346f1be7bc3c92cf1f26b`\n        axios.get(url)\n       .then((response)=>{\n        console.log(response.data.features[0].geometry.coordinates)\n        setViewport({\n          latitude:response.data.features[0].geometry.coordinates[1],\n          longitude:response.data.features[0].geometry.coordinates[0],\n        })\n       })\n       .catch((err)=>{\n        console.log(err)\n       })\n \n    }\n  }\n\n  let changeAdress = () =>{\n    let url = 'http://127.0.0.1:8000/'\n  }\n\n  return (\n    <div className=\"map-cont\">\n      {viewport?(\n\n      <ReactMapGL\n        {...viewport}\n        latitude={viewport.latitude }\n        longitude={viewport.longitude }\n        width= {\"100vw\"}\n        height= {\"1000vh\"}\n        zoom= {15}\n        mapboxAccessToken=\"pk.eyJ1IjoiYWRpYmtoYW5kZXYiLCJhIjoiY2xnNWt4YW85MDRsaTNpcGQ5djFrdWhyYiJ9.T5M-84Av38RJSb1j1Bp6Iw\"\n        mapStyle=\"mapbox://styles/adibkhandev/clg6ih4pd009y01p0dup15qd7\"\n        onMove={(evt) => {\n\n          setViewport({\n            ...evt,\n            latitude:viewport.latitude,\n            longitude:viewport.longitude\n          });\n          console.log('hocche',evt)\n        }}\n       >\n       <Marker \n       draggable \n        latitude={viewport.latitude || 23.7531959}\n        longitude={viewport.longitude || 90.4374604 }\n       onDragStart={onMarkerDragStart}\n       onDragEnd={onDragEnd}\n       onDrag={onMarkerDrag}\n       >\n     \n       </Marker>\n\n      </ReactMapGL>\n      \n\n\n      ):'hi'}\n      \n     <div className=\"nav-cont\">\n       \n      <div className=\"nav\">\n        <div onClick={geoCode} className=\"search-btn\">\n          <img src=\"images/search-ash.png\" alt=\"\"/>\n        </div>\n        <input value={adress || search} onChange={(e)=>setSearch(e.target.value)} className=\"location-search\" type=\"text\"/>\n        <div className=\"target\">\n          <img src=\"images/target.png\" alt=\"\"/>\n        </div>\n      </div>\n    </div>\n     </div>\n  );\n}\n\nexport default GeoMap;"],"mappings":"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"},"metadata":{},"sourceType":"module"}