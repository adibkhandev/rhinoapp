{"ast":null,"code":"import _slicedToArray from\"/home/adib/code/rhino_production/rhino/rhino-front/rhino/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext,useRef}from'react';import{Link}from\"react-router-dom\";import axios from'axios';import Context from'./Context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var array=[0,1,2,3];var MostPopular=function MostPopular(){var url='https://rhino-backend.up.railway.app/ranker/';var image_url='https://rhino-backend.up.railway.app/';var context=useContext(Context);var setResult=context.setresult;var setLoading=context.setloading;var board=context.board;var setBoard=context.setBoard;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),rank=_useState2[0],setRank=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),popular=_useState4[0],setPopular=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),load=_useState6[0],setLoad=_useState6[1];useEffect(function(){// console.log('use')\naxios.get(url).then(function(response){// console.log('hocche')\nsetRank(response.data);// console.log(response.data,'rank')\n// console.log('being s')\n}).catch(function(err){// console.log(err)\n});},[]);useEffect(function(){if(rank){// console.log('rank ase')\nsetBoard(rank);// console.log(board)\n}},[rank]);useEffect(function(){if(board){setPopular(board.slice(0,4));setLoad(false);}},[board]);var resultHandler=function resultHandler(){// console.log(popular,'pops')\nsetLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"page3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"description\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"heading\",children:\"Most Popular\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"discon\",children:\"Discount on\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"subheading\",children:\"Manga Light novels and all\"}),/*#__PURE__*/_jsx(\"div\",{onClick:resultHandler,className:\"but-con\",children:/*#__PURE__*/_jsx(Link,{to:\"/searched\",children:/*#__PURE__*/_jsx(\"button\",{className:\"callToaction\",children:\"Shop Now\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"populars\",children:!load?popular.map(function(item){// console.log(item.image)\nreturn/*#__PURE__*/_jsx(Item,{item:item});}):'hi'})]});};var Item=function Item(_ref){var item=_ref.item;var image_url='https://rhino-backend.up.railway.app/';var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),visible=_useState8[0],setVisible=_useState8[1];var cardRef=useRef(null);var callback=function callback(entries){var _entries=_slicedToArray(entries,1),entry=_entries[0];if(entry){setVisible(entry.isIntersecting);console.log(visible,'is');}};var options={root:null,rootMargin:'0px',threshold:0.45};useEffect(function(){var observer=new IntersectionObserver(callback,options);if(cardRef.current){observer.observe(cardRef.current);}return function(){if(cardRef.current){observer.unobserve(cardRef.current);}};},[cardRef,options]);return/*#__PURE__*/_jsx(Link,{to:\"./post\",state:item,children:/*#__PURE__*/_jsxs(\"div\",{ref:cardRef,className:!visible?\"card out\":\"card\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(image_url).concat(item.image),alt:\"\",className:\"card-image\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"card-title\",children:item.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/taka.png\",alt:\"\",className:\"price-icon\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"card-price\",children:item.price})]})]})});};export default MostPopular;","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","Link","axios","Context","array","MostPopular","url","image_url","context","setResult","setresult","setLoading","setloading","board","setBoard","rank","setRank","popular","setPopular","load","setLoad","get","then","response","data","catch","err","slice","resultHandler","map","item","Item","visible","setVisible","cardRef","callback","entries","entry","isIntersecting","console","log","options","root","rootMargin","threshold","observer","IntersectionObserver","current","observe","unobserve","image","name","price"],"sources":["/home/adib/code/rhino_production/rhino/rhino-front/rhino/src/all-pages/MostPopular.js"],"sourcesContent":["import React,{useState,useEffect,useContext,useRef} from 'react'\nimport {Link} from \"react-router-dom\"\nimport axios from 'axios'\nimport Context from './Context'\nlet array = [0,1,2,3] \nconst MostPopular = () => {\n    \n     let url =    'https://rhino-backend.up.railway.app/ranker/'\n\tlet image_url = 'https://rhino-backend.up.railway.app/'\n\tlet context = useContext(Context)\n\tlet setResult = context.setresult\n\tlet setLoading = context.setloading\n\tlet board = context.board\n\tlet setBoard = context.setBoard\n\tlet [rank,setRank]= useState(null)\n\n\t\n    let [popular,setPopular]=useState([])\n    let [load,setLoad] = useState(true)\n  useEffect(() => {\n    // console.log('use')\n       axios.get(url)\n       .then((response)=>{\n        // console.log('hocche')\n        setRank(response.data)\n    \t\n        // console.log(response.data,'rank')\n        // console.log('being s')\n\n       })\n       .catch((err)=>{\n        // console.log(err)\n       })\n  },[])\n  useEffect(() => {\n  \tif(rank){\n  \t\t// console.log('rank ase')\n    \n  \tsetBoard(rank)\n  \t\n  \t// console.log(board)\n    }\n  }, [rank])\n  useEffect(() => {\n     if(board){\n    setPopular(board.slice(0,4))\n    setLoad(false)\n  \t\t\n  \t}\n  }, [board])\n    let resultHandler = () =>{\n    \t// console.log(popular,'pops')\n    \tsetLoading(false)\n    }\n\treturn (\n\t\t<div className=\"page3\">\n\t\t\t<div className=\"description\">\n\t\t\t\t<h1 className=\"heading\">Most Popular</h1>\n\t\t\t\t<h1 className=\"discon\">Discount on</h1>\n\t\t\t\t<h1 className=\"subheading\">Manga Light novels and all</h1>\n\t\t\t\t<div onClick={resultHandler} className=\"but-con\">\n\t\t\t\t<Link to='/searched' >\n\t\t\t\t\t<button className=\"callToaction\">Shop Now</button>\n\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className=\"populars\">\n\t\t\t        {!load?popular.map((item)=>{\n\t\t\t        \t// console.log(item.image)\n\t\t\t        \treturn(\n                      <Item item={item} ></Item>  \n\t\t\t        \t)\n\t\t\t        }):'hi'}\n\t\t\t\t  \n\t\t\t\t\t\n\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t)\n}\n\n\nlet Item = ({item}) =>{\n\tlet image_url = 'https://rhino-backend.up.railway.app/'\n\tlet [visible,setVisible] = useState(false)\n\tlet cardRef = useRef(null)\n\tlet callback = entries =>{\n\t\t     let [entry] = entries\n\t\t     if(entry){\n\n         setVisible(entry.isIntersecting)\n         console.log(visible,'is')\n\t\t     }\n\t}\n\tlet options = {\n\t\troot:null,\n\t\trootMargin:'0px',\n\t\tthreshold:0.45\n\t}\n\tuseEffect(() => {\n\t\tlet observer = new IntersectionObserver(callback,options)\n\t\tif(cardRef.current){\n\t\t\tobserver.observe(cardRef.current)\n\t\t}\n\t\treturn () => {\n\t\t\tif(cardRef.current){\n\t\t\t\t\n\t\t\tobserver.unobserve(cardRef.current)\n\t\t\t}\n\t\t};\n\t}, [cardRef,options])\n\treturn(\n     <Link to=\"./post\" state={item} >\n\t\t\t\t\t      <div ref={cardRef} className={!visible?\"card out\":\"card\"}>\n\t\t\t\t\t\t      <img src={`${image_url}${item.image}`} alt=\"\" className=\"card-image\"/>\n\t\t\t\t\t\t      <h1 className=\"card-title\">{item.name}</h1>\n\t\t\t\t\t\t      <div className=\"price\">\n\t\t\t\t\t\t       <img src=\"images/taka.png\" alt=\"\" className=\"price-icon\"/>\n\t\t\t\t\t\t       <h1 className=\"card-price\">{item.price}</h1>\n\t\t\t\t\t\t      </div>\n\t\t\t\t\t\t\n\t\t\t\t\t      </div>\n\t\t\t\t   \t\n     </Link>\n\t)\n}\nexport default MostPopular"],"mappings":"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"},"metadata":{},"sourceType":"module"}