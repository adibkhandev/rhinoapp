{"ast":null,"code":"import _slicedToArray from\"/home/adib/code/rhino_production/rhino/rhino-front/rhino/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from'react';import{useDispatch}from'react-redux';import{useNavigate}from'react-router-dom';import Context from'./Context';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var Like=function Like(_ref){var product=_ref.product,id=_ref.id,liked=_ref.liked;var navigate=useNavigate();var dispatch=useDispatch();var context=useContext(Context);var userid=context.user?context.user.user_id:null;var _useState=useState(liked?true:false),_useState2=_slicedToArray(_useState,2),like=_useState2[0],setLike=_useState2[1];// let url = 'http://127.0.0.1:8000/like/'\n// let url2 = 'http://127.0.0.1:8000/dislike/'\nvar url='https://rhino-backend.up.railway.app/like/';var url2='https://rhino-backend.up.railway.app/dislike/';var likes=context.userdata?context.userdata.liked:null;useEffect(function(){console.log(likes,id,'kkk');console.log(context.userdata);// console.log(likes.includes(product))\nif(likes){console.log(likes.filter(function(e){return e.id===id;}).length);if(likes.filter(function(e){return e.id===id;}).length!==0){setLike(true);}}},[likes]);return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){if(context.userdata){if(!like){axios.post(url,{'userid':userid,'productid':id}).then(function(response){console.log(response,'likes');}).catch(function(err){console.log(err);});setLike(true);dispatch({type:'ADD-LIKE'});}else if(like){axios.post(url2,{'userid':userid,'productid':id}).then(function(response){console.log(response,'likes');}).catch(function(err){console.log(err);});setLike(false);}}else{navigate('/login');}},className:\"like\",children:/*#__PURE__*/_jsx(\"svg\",{className:like?\"heart liked\":\"heart\",viewBox:\"0 0 256 256\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M133.7,211.9l81-81c19.9-20,22.8-52.7,4-73.6a52,52,0,0,0-75.5-2.1L128,70.5,114.9,57.3c-20-19.9-52.7-22.8-73.6-4a52,52,0,0,0-2.1,75.5l83.1,83.1A8.1,8.1,0,0,0,133.7,211.9Z\"})})});};export default Like;","map":{"version":3,"names":["useState","useContext","useEffect","useDispatch","useNavigate","Context","axios","Like","product","id","liked","navigate","dispatch","context","userid","user","user_id","like","setLike","url","url2","likes","userdata","console","log","filter","e","length","post","then","response","catch","err","type"],"sources":["/home/adib/code/rhino_production/rhino/rhino-front/rhino/src/all-pages/Like.js"],"sourcesContent":["import {useState,useContext,useEffect} from 'react'\nimport {useDispatch} from 'react-redux'\nimport {useNavigate} from 'react-router-dom'\nimport Context from './Context'\nimport axios from 'axios'\n \nlet Like =({product,id,liked})=>{\n   let navigate = useNavigate()\n   let dispatch = useDispatch()\n   let context = useContext(Context)\n   let userid = context.user? context.user.user_id : null\n   let [like,setLike]= useState(liked?true:false)\n   // let url = 'http://127.0.0.1:8000/like/'\n   // let url2 = 'http://127.0.0.1:8000/dislike/'\n   let url = 'https://rhino-backend.up.railway.app/like/'\n   let url2 = 'https://rhino-backend.up.railway.app/dislike/'\n   let likes = context.userdata? context.userdata.liked : null\n   useEffect(() => {\n      console.log(likes,id,'kkk')\n      console.log(context.userdata)\n      // console.log(likes.includes(product))\n\n      if(likes){\n         console.log(likes.filter(e=>e.id===id).length)\n        if(likes.filter(e=>e.id===id).length!==0){\n         setLike(true)\n        }\n      }\n   }, [likes])\n   return(\n      <div onClick={()=>{\n\n         if(context.userdata){\n             if(!like){\n             axios.post(url,{'userid':userid,'productid':id})\n              .then((response)=>{\n               console.log(response,'likes')\n              })\n              .catch((err)=>{\n               console.log(err)\n              })\n               setLike(true)\n               dispatch({type:'ADD-LIKE'})\n               }\n             else if(like){\n             axios.post(url2,{'userid':userid,'productid':id})\n              .then((response)=>{\n               console.log(response,'likes')\n              })\n              .catch((err)=>{\n               console.log(err)\n              })\n               setLike(false)  \n             }\n\n             }\n         else{\n            navigate('/login')\n         }\n\n          }\n       } className=\"like\">\n         \n         <svg className={like?\"heart liked\":\"heart\"} viewBox=\"0 0 256 256\" xmlns=\"http://www.w3.org/2000/svg\">\n      \n               <path  d=\"M133.7,211.9l81-81c19.9-20,22.8-52.7,4-73.6a52,52,0,0,0-75.5-2.1L128,70.5,114.9,57.3c-20-19.9-52.7-22.8-73.6-4a52,52,0,0,0-2.1,75.5l83.1,83.1A8.1,8.1,0,0,0,133.7,211.9Z\" \n          />\n       </svg>\n      </div>\n   )\n}\n\nexport default Like"],"mappings":"8IAAA,OAAQA,QAAQ,CAACC,UAAU,CAACC,SAAS,KAAO,OAAO,CACnD,OAAQC,WAAW,KAAO,aAAa,CACvC,OAAQC,WAAW,KAAO,kBAAkB,CAC5C,MAAOC,QAAO,KAAM,WAAW,CAC/B,MAAOC,MAAK,KAAM,OAAO,4CAEzB,GAAIC,KAAI,CAAE,QAANA,KAAI,MAAwB,IAApBC,QAAO,MAAPA,OAAO,CAACC,EAAE,MAAFA,EAAE,CAACC,KAAK,MAALA,KAAK,CACzB,GAAIC,SAAQ,CAAGP,WAAW,EAAE,CAC5B,GAAIQ,SAAQ,CAAGT,WAAW,EAAE,CAC5B,GAAIU,QAAO,CAAGZ,UAAU,CAACI,OAAO,CAAC,CACjC,GAAIS,OAAM,CAAGD,OAAO,CAACE,IAAI,CAAEF,OAAO,CAACE,IAAI,CAACC,OAAO,CAAG,IAAI,CACtD,cAAoBhB,QAAQ,CAACU,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,wCAAzCO,IAAI,eAACC,OAAO,eACjB;AACA;AACA,GAAIC,IAAG,CAAG,4CAA4C,CACtD,GAAIC,KAAI,CAAG,+CAA+C,CAC1D,GAAIC,MAAK,CAAGR,OAAO,CAACS,QAAQ,CAAET,OAAO,CAACS,QAAQ,CAACZ,KAAK,CAAG,IAAI,CAC3DR,SAAS,CAAC,UAAM,CACbqB,OAAO,CAACC,GAAG,CAACH,KAAK,CAACZ,EAAE,CAAC,KAAK,CAAC,CAC3Bc,OAAO,CAACC,GAAG,CAACX,OAAO,CAACS,QAAQ,CAAC,CAC7B;AAEA,GAAGD,KAAK,CAAC,CACNE,OAAO,CAACC,GAAG,CAACH,KAAK,CAACI,MAAM,CAAC,SAAAC,CAAC,QAAEA,EAAC,CAACjB,EAAE,GAAGA,EAAE,GAAC,CAACkB,MAAM,CAAC,CAC/C,GAAGN,KAAK,CAACI,MAAM,CAAC,SAAAC,CAAC,QAAEA,EAAC,CAACjB,EAAE,GAAGA,EAAE,GAAC,CAACkB,MAAM,GAAG,CAAC,CAAC,CACxCT,OAAO,CAAC,IAAI,CAAC,CACd,CACF,CACH,CAAC,CAAE,CAACG,KAAK,CAAC,CAAC,CACX,mBACG,YAAK,OAAO,CAAE,kBAAI,CAEf,GAAGR,OAAO,CAACS,QAAQ,CAAC,CAChB,GAAG,CAACL,IAAI,CAAC,CACTX,KAAK,CAACsB,IAAI,CAACT,GAAG,CAAC,CAAC,QAAQ,CAACL,MAAM,CAAC,WAAW,CAACL,EAAE,CAAC,CAAC,CAC9CoB,IAAI,CAAC,SAACC,QAAQ,CAAG,CACjBP,OAAO,CAACC,GAAG,CAACM,QAAQ,CAAC,OAAO,CAAC,CAC9B,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,GAAG,CAAG,CACbT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC,CACjB,CAAC,CAAC,CACDd,OAAO,CAAC,IAAI,CAAC,CACbN,QAAQ,CAAC,CAACqB,IAAI,CAAC,UAAU,CAAC,CAAC,CAC3B,CAAC,IACE,IAAGhB,IAAI,CAAC,CACbX,KAAK,CAACsB,IAAI,CAACR,IAAI,CAAC,CAAC,QAAQ,CAACN,MAAM,CAAC,WAAW,CAACL,EAAE,CAAC,CAAC,CAC/CoB,IAAI,CAAC,SAACC,QAAQ,CAAG,CACjBP,OAAO,CAACC,GAAG,CAACM,QAAQ,CAAC,OAAO,CAAC,CAC9B,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,GAAG,CAAG,CACbT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC,CACjB,CAAC,CAAC,CACDd,OAAO,CAAC,KAAK,CAAC,CAChB,CAEA,CAAC,IACD,CACDP,QAAQ,CAAC,QAAQ,CAAC,CACrB,CAEC,CACF,CAAC,SAAS,CAAC,MAAM,uBAEhB,YAAK,SAAS,CAAEM,IAAI,CAAC,aAAa,CAAC,OAAQ,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,4BAA4B,uBAE9F,aAAO,CAAC,CAAC,0KAA0K,EACtL,EACC,EACD,CAEZ,CAAC,CAED,cAAeV,KAAI"},"metadata":{},"sourceType":"module"}