{"ast":null,"code":"import _slicedToArray from\"/home/adib/code/rhino_production/rhino/rhino-front/rhino/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import{Link}from'react-router-dom';import Context from'./Context';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Account=function Account(){var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),number=_useState4[0],setNumber=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),mail=_useState6[0],setMail=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),adress=_useState8[0],setAdress=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),pfp=_useState10[0],setPfp=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),imageUrl=_useState12[0],setImageUrl=_useState12[1];var pfp_ref=useRef(null);var update_url='http://127.0.0.1:8000/update/';var config={headers:{\"content-type\":\"multipart/form-data\"}};var url='http://127.0.0.1:8000';var context=useContext(Context);var logout=context.logout;var userdata=context.userdata;var setUser=context.setUser;console.log(userdata.id,'id');// console.log(userdata)\nuseEffect(function(){// console.log('hoise')\nif(pfp){var reader=new FileReader();reader.onloadend=function(){setImageUrl(reader.result);};reader.readAsDataURL(pfp);}},[pfp]);return userdata?/*#__PURE__*/_jsxs(\"div\",{className:\"account-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pfp-cont\",children:[/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return pfp_ref.current.click();},src:imageUrl?imageUrl:userdata.profile_pic?\"\".concat(url).concat(userdata.profile_pic):\"images/pfp.jpg\",alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setPfp(e.target.files[0]);},type:\"file\",ref:pfp_ref})]}),/*#__PURE__*/_jsx(\"div\",{className:\"username\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setUsername(e.target.value);},value:username,type:\"text\",placeholder:userdata.first_name+userdata.last_name})}),/*#__PURE__*/_jsx(\"div\",{className:\"number\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setNumber(e.target.value);},value:number,type:\"text\",placeholder:\"0\".concat(userdata.phonenumber)})}),/*#__PURE__*/_jsx(\"div\",{className:\"mail\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setMail(e.target.value);},value:mail,type:\"text\",placeholder:userdata.email})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"adress\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Adress\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setAdress(e.target.value);},value:adress,type:\"text\",placeholder:userdata.adress})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lists\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wishlist\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"WishList\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"images\",children:[userdata.liked.slice(0,3).map(function(item){return/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(url).concat(item.image),alt:\"\"});}),/*#__PURE__*/_jsx(Link,{to:\"/liked\",children:/*#__PURE__*/_jsx(\"div\",{className:\"go-to\",children:/*#__PURE__*/_jsx(\"img\",{src:\"images/arrow-icon.png\",alt:\"\"})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"orders\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Orders\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"images\",children:[userdata.ordered.slice(0,3).map(function(item){return/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(url).concat(item.product[0].image),alt:\"\"});}),/*#__PURE__*/_jsx(Link,{to:\"/order\",children:/*#__PURE__*/_jsx(\"div\",{className:\"go-to\",children:/*#__PURE__*/_jsx(\"img\",{src:\"images/arrow-icon.png\",alt:\"\"})})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btns\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){console.log(pfp,'pff');axios.post(update_url,{\"id\":userdata.id,\"username\":username,\"pfp\":pfp,\"number\":number,\"mail\":mail,\"adress\":adress},config).then(function(response){console.log(response.data);setUser(response.data);}).catch(function(err){console.log(err);});navigate('/');},className:\"btn-1\",children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"btn-2\",children:\"Logout\"})]})]})]}):'hi';};export default Account;","map":{"version":3,"names":["React","useContext","useState","useEffect","useRef","useNavigate","Link","Context","axios","Account","navigate","username","setUsername","number","setNumber","mail","setMail","adress","setAdress","pfp","setPfp","imageUrl","setImageUrl","pfp_ref","update_url","config","headers","url","context","logout","userdata","setUser","console","log","id","reader","FileReader","onloadend","result","readAsDataURL","current","click","profile_pic","e","target","files","value","first_name","last_name","phonenumber","email","liked","slice","map","item","image","ordered","product","post","then","response","data","catch","err"],"sources":["/home/adib/code/rhino_production/rhino/rhino-front/rhino/src/all-pages/Account.js"],"sourcesContent":["import React,{useContext,useState,useEffect,useRef} from 'react'\nimport {useNavigate} from 'react-router-dom'\nimport {Link} from 'react-router-dom'\nimport Context from './Context'\nimport axios from 'axios'\nconst Account = () => {\n\tlet navigate = useNavigate()\n\tlet [username,setUsername]=useState()\n\tlet [number,setNumber]=useState()\n\tlet [mail,setMail]=useState()\n\tlet [adress,setAdress]=useState()\n\tlet [pfp,setPfp]=useState(null)\n\tlet [imageUrl,setImageUrl]= useState(null)\n\tlet pfp_ref = useRef(null)\n\tlet update_url = 'http://127.0.0.1:8000/update/'\n\t\tlet config = {\n\t\t headers:{\n                       \"content-type\":\"multipart/form-data\",\n\t\t },\n\t    };\n\n\tlet url = 'http://127.0.0.1:8000'\n    let context = useContext(Context)\n    let logout = context.logout\n    let userdata = context.userdata\n    let setUser = context.setUser\n    console.log(userdata.id,'id')\n    // console.log(userdata)\n    useEffect(() => {\n    \t// console.log('hoise')\n    \tif(pfp){\n    \tconst reader = new FileReader()\n        \t\treader.onloadend = () =>{\n        \t\t\tsetImageUrl(reader.result)\n        \t\t}\n        \t\treader.readAsDataURL(pfp)\n        }\n    }, [pfp])\n\treturn (\n\t\tuserdata?\n\t\t<div className=\"account-page\">\n\t\t\t<div className=\"left\">\n\t\t\t\t<div className=\"pfp-cont\">\n\t\t\t\t\t<img onClick={()=>pfp_ref.current.click()} src={imageUrl?imageUrl : userdata.profile_pic?`${url}${userdata.profile_pic}`:\"images/pfp.jpg\"} alt=\"\"/>\n\t\t\t\t\t<input onChange={(e)=>setPfp(e.target.files[0])} type=\"file\" ref={pfp_ref}/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"username\">\n\t\t\t\t   <input onChange={(e)=>setUsername(e.target.value)} value={username} type=\"text\" placeholder={userdata.first_name+userdata.last_name}/>\t\n\t\t\t\t</div>\n\t\t\t\t<div className=\"number\">\n\t\t\t\t\t<input onChange={(e)=>setNumber(e.target.value)} value={number} type=\"text\" placeholder={`0${userdata.phonenumber}`}/>\n\t\t\t\t</div>\n                <div className=\"mail\">\n                \t<input onChange={(e)=>setMail(e.target.value)} value={mail} type=\"text\" placeholder={userdata.email}/>\n                </div>\n\n\t\t\t</div>\n\t\t\t<div className=\"right\">\n\t\t\t\t<div className=\"adress\">\n\t\t\t\t\t<h1>\n\t\t\t\t\t\tAdress\n\t\t\t\t\t</h1>\n\t\t\t\t\t<input onChange={(e)=>setAdress(e.target.value)} value={adress} type=\"text\" placeholder={userdata.adress}/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"lists\">\n\t\t\t\t\t<div className=\"wishlist\">\n\t\t\t\t\t<h1>\n\t\t\t\t\t\tWishList\n\t\t\t\t\t</h1>\n\t\t\t\t\t<div className=\"images\">\n\t\t\t\t\t\t{ userdata.liked.slice(0,3).map((item)=>{\n\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<img src={`${url}${item.image}`} alt=\"\"/>\n\t\t\t\t\t\t    )\n\t\t\t\t\t\t})\n\t\t\t\t\t    }\n\t\t\t\t\t    <Link to=\"/liked\">\n\t\t\t\t\t    <div className=\"go-to\">\n                        \t<img src=\"images/arrow-icon.png\" alt=\"\"/>\n                        </div>\n\t\t\t\t\t    </Link>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"orders\">\n\t\t\t\t\t<h1>\n\t\t\t\t\t\tOrders\n\t\t\t\t\t</h1>\n\t\t\t\t\t<div className=\"images\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tuserdata.ordered.slice(0,3).map((item)=>{\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<img src={`${url}${item.product[0].image}`} alt=\"\"/>\n\t\t\t\t\t\t\t    )\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Link to=\"/order\">\n\t\t\t\t\t\t<div className=\"go-to\">\n\t\t\t\t\t\t\t<img src=\"images/arrow-icon.png\" alt=\"\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"btns\">\n\t\t\t\t\t<button onClick={()=>{\n\t\t\t\t\t\tconsole.log(pfp,'pff')\n                         axios.post(update_url,{\"id\":userdata.id,\"username\":username,\"pfp\":pfp,\"number\":number,\"mail\":mail,\"adress\":adress},config)\n                         .then((response)=>{\n                         \tconsole.log(response.data)\n                         \tsetUser(response.data)\n                         })\n                         .catch((err)=>{\n                         \tconsole.log(err)\n                         })\n                         navigate('/')\n\n\t\t\t\t\t}\n\t\t\t\t} \n\n\t\t\t\t\tclassName=\"btn-1\">\n\t\t\t\t\t\tSave Changes\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={logout} className=\"btn-2\">\n\t\t\t\t\t\tLogout\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>:'hi'\n\t)\n}\n\nexport default Account\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}